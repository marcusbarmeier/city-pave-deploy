// Â© 2025 City Pave. All Rights Reserved. Unauthorized copying is prohibited.
const firebaseConfigProd = { apiKey: "AIzaSyADrnYgh1fSTo3IZD7HOEJMyjduzDYIYSs", authDomain: "city-pave-estimator.firebaseapp.com", projectId: "city-pave-estimator", storageBucket: "city-pave-estimator.firebasestorage.app", storageBucket: "city-pave-estimator.firebasestorage.app", messagingSenderId: "111714884839", appId: "1:111714884839:web:2b782a1b7be5be8edc5642", measurementId: "G-F256W9036F" }; const firebaseConfigBeta = { apiKey: "AIzaSyBSbgNhSIpjd9-ielh1V0EivXZF90166Ow", authDomain: "city-pave-estimator-beta.firebaseapp.com", projectId: "city-pave-estimator-beta", storageBucket: "city-pave-estimator-beta.firebasestorage.app", messagingSenderId: "292246416016", appId: "1:292246416016:web:1bd52862a7e0560e7c8615" }; function getActiveConfig() { let search = window.location.search; if (search.includes('%3D') || search.includes('%3F')) { console.warn('Malformed URL detected. Fixing in-memory...'); try { const decoded = decodeURIComponent(search); if (decoded.startsWith('?') || decoded.includes('=')) { search = decoded; const newUrl = window.location.pathname + search; window.history.replaceState(null, '', newUrl); } } catch (e) { console.warn("Failed to decode URL, proceeding with original:", e); } } const urlParams = new URLSearchParams(search); const envParam = urlParams.get('env'); const storedEnv = localStorage.getItem('app_env'); if (envParam === 'beta' || storedEnv === 'beta') { if (envParam === 'beta' && storedEnv !== 'beta') { localStorage.setItem('app_env', 'beta'); } console.warn('âš ï¸ ðŸš§ RUNNING IN BETA FLIGHT MODE ðŸš§ âš ï¸'); return normalizeConfig(firebaseConfigBeta, 'beta'); } return normalizeConfig(firebaseConfigProd, 'production'); } function normalizeConfig(config, envName) { if (config.apiKey.includes('REPLACE')) { console.error(`âŒ [${envName}] Firebase Config is missing! Please update firebase-config.js`); } return { ...config, _environment: envName }; } export const activeConfig = getActiveConfig(); window.switchEnv = (env) => { if (env === 'reset') { localStorage.removeItem('app_env'); console.log('Environment reset to Production. Reloading...'); } else { localStorage.setItem('app_env', env); console.log(`Environment switched to ${env}. Reloading...`); } setTimeout(() => window.location.reload(), 1000); };