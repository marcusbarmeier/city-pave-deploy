// Â© 2025 City Pave. All Rights Reserved. Unauthorized copying is prohibited.
export function renderCalculator(container, config) { if (!container || !config) return; let headerColor = 'bg-gray-50'; let headerText = 'text-gray-800'; if (config.category === 'excavation') { headerColor = 'bg-orange-50'; headerText = 'text-orange-900'; } if (config.category === 'snow') { headerColor = 'bg-blue-50'; headerText = 'text-blue-900'; } if (config.category === 'paving') { headerColor = 'bg-gray-800'; headerText = 'text-white'; } let html = ` <div class="p-4 ${headerColor} border-b border-gray-200 rounded-t-lg"> <h3 class="font-bold ${headerText} flex items-center"> <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> ${config.name} </h3> ${config.description ? `<p class="text-xs opacity-75 mt-1">${config.description}</p>` : ''} </div> <div class="p-4 space-y-4 bg-white" id="cc-inputs-container"> `; config.inputs.forEach(inp => { html += `<div class="cc-input-group"> <label class="block text-xs font-bold text-gray-500 uppercase mb-1">${inp.label}</label>`; if (inp.type === 'system' && inp.id === 'area') { html += `<input type="number" id="cc-inp-${inp.id}" data-id="${inp.id}" class="w-full p-2 border rounded bg-gray-100" readonly value="0"> <p class="text-xs text-gray-400 mt-1">System Variable (Area)</p>`; } else if (inp.type === 'select') { html += `<select id="cc-inp-${inp.id}" data-id="${inp.id}" class="w-full p-2 border rounded">`; (inp.options || []).forEach(opt => { html += `<option value="${opt.value}">${opt.label}</option>`; }); html += `</select>`; } else { html += `<input type="number" id="cc-inp-${inp.id}" data-id="${inp.id}" class="w-full p-2 border rounded" value="${inp.default || 0}">`; } html += `</div>`; }); html += `</div> <div class="bg-gray-100 p-4 border-t border-gray-200" id="cc-results-container"> <h4 class="text-xs font-bold text-gray-500 uppercase mb-3">Results</h4> <div class="space-y-2"> `; config.calculations.forEach(calc => { const colorClass = calc.isCost ? 'text-green-700 font-bold text-lg' : 'text-gray-800 font-bold'; html += ` <div class="flex justify-between items-center"> <span class="text-sm text-gray-600">${calc.label}:</span> <span id="cc-res-${calc.id}" class="${colorClass}">--</span> </div> `; }); html += `</div></div>`; container.innerHTML = html; } export function updateResultsUI(results, config) { config.calculations.forEach(calc => { const el = document.getElementById(`cc-res-${calc.id}`); if (el) { const val = results[calc.id]; if (calc.isCost) el.textContent = `$${(val || 0).toFixed(2)}`; else el.textContent = (val || 0).toFixed(2); } }); } export function getInputsFromUI(config) { const inputs = {}; config.inputs.forEach(inp => { const el = document.getElementById(`cc-inp-${inp.id}`); if (el) { inputs[inp.id] = parseFloat(el.value) || 0; } }); return inputs; }