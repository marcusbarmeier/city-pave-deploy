// Â© 2025 City Pave. All Rights Reserved. Unauthorized copying is prohibited.
export function evaluateFormula(formula, inputs) { try { const paramNames = Object.keys(inputs); const paramValues = Object.values(inputs); const func = new Function(...paramNames, `try { return ${formula}; } catch(e) { return 0; }`); return func(...paramValues); } catch (e) { console.error(`Error evaluating formula: ${formula}`, e); return 0; } } export function runCalculations(config, currentInputs) { const results = {}; const scope = { ...currentInputs }; config.calculations.forEach(calc => { const val = evaluateFormula(calc.formula, scope); results[calc.id] = val; scope[calc.id] = val; }); return results; }