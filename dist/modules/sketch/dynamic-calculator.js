// Â© 2025 City Pave. All Rights Reserved. Unauthorized copying is prohibited.
import { CalculatorRunner } from '../custom_calc/calc-runner.js'; export class DynamicCalculator { constructor(manager, config) { this.manager = manager; this.config = config; this.container = manager.container; this.runner = null; } render() { this.runner = new CalculatorRunner(this.container, this.config); this.runner.onUpdate = (data) => { this.manager.data = data; }; this.runner.init(); this.injectSaveButton(); } injectSaveButton() { const resultsContainer = document.getElementById('cc-results-container'); if (resultsContainer && !document.getElementById('calc-save-btn')) { const footer = document.createElement('div'); footer.className = "p-4 border-t border-gray-200 bg-gray-50 mt-4"; footer.innerHTML = ` <button id="calc-save-btn" class="w-full py-2 bg-indigo-600 text-white font-bold rounded hover:bg-indigo-700 shadow-sm">Save & Return to Estimator</button> `; this.container.appendChild(footer); document.getElementById('calc-save-btn').addEventListener('click', () => this.manager.saveAndReturn()); } } updateSystemValues(sketchArea) { if (this.runner) { this.runner.updateSystemInput('area', sketchArea); } } }