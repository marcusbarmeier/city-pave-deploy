<!-- // © 2025 City Pave. All Rights Reserved. Unauthorized copying is prohibited. -->
// © 2025 City Pave. All Rights Reserved.
// This code is the confidential and proprietary property of City Pave.
// Unauthorized copying, distribution, or use of this code is strictly prohibited.
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simple Measurement Tool</title><script src="https://cdn.tailwindcss.com"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script><style>
        .gm-style .gm-style-iw-c { background-color: white; }
        .gm-style .gm-style-iw-d { overflow: hidden !important; }
        .dimension-label {
            background-color: black;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            white-space: nowrap;
            transform: translate(-50%, -50%);
        }
    </style></head><body class="bg-gray-100 flex flex-col h-screen"><header class="p-4 bg-white shadow-md z-10 flex items-center gap-4"><input id="pac-input" type="text" placeholder="Search for an address..." class="w-full p-2 border border-gray-300 rounded-md shadow-sm"><button id="toggle-location-btn" title="Show My Location" class="p-2 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="22" x2="18" y1="12" y2="12"/><line x1="6" x2="2" y1="12" y2="12"/><line x1="12" x2="12" y1="6" y2="2"/><line x1="12" x2="12" y1="22" y2="18"/></svg></button></header><main class="flex-grow flex flex-col md:flex-row min-h-0"><div id="map" class="h-64 flex-shrink-0 md:flex-grow md:h-auto"></div><div id="info-panel" class="w-full md:w-96 bg-white p-4 flex flex-col flex-grow min-h-0 md:flex-grow-0"><div class="flex-shrink-0"><h2 class="text-lg font-semibold border-b pb-2 mb-2">Client Information</h2><div class="space-y-3"><div><label for="estimate-select" class="text-sm font-medium text-gray-700">Select Estimate</label><select id="estimate-select" class="w-full mt-1 p-2 border border-gray-300 rounded-md shadow-sm"></select></div><div><label for="client-name" class="text-sm font-medium text-gray-700">Name</label><input type="text" id="client-name" class="w-full mt-1 p-2 border border-gray-300 rounded-md shadow-sm"></div><div><label for="client-phone" class="text-sm font-medium text-gray-700">Phone</label><input type="tel" id="client-phone" class="w-full mt-1 p-2 border border-gray-300 rounded-md shadow-sm"></div><div><label for="client-email" class="text-sm font-medium text-gray-700">Email</label><input type="email" id="client-email" class="w-full mt-1 p-2 border border-gray-300 rounded-md shadow-sm"></div><div><label for="client-address" class="text-sm font-medium text-gray-700">Address</label><textarea id="client-address" rows="2" class="w-full mt-1 p-2 border border-gray-300 rounded-md shadow-sm bg-gray-100" readonly></textarea></div></div></div><div class="flex-grow mt-4 pt-4 border-t overflow-y-auto min-h-0"><div class="flex justify-between items-center mb-2"><h2 class="text-lg font-semibold">Measurements</h2><div class="flex items-center gap-4"><button id="undo-btn" class="text-sm text-blue-600 hover:text-blue-800 font-semibold disabled:text-gray-400 disabled:cursor-not-allowed">Undo</button><button id="redo-btn" class="text-sm text-blue-600 hover:text-blue-800 font-semibold disabled:text-gray-400 disabled:cursor-not-allowed">Redo</button></div></div><div id="measurement-list" class="space-y-3"><p class="text-gray-500">Use the tools on the map to draw a shape.</p></div></div><div class="flex-shrink-0 mt-4 pt-4 border-t"><button id="save-btn" class="w-full p-3 bg-blue-600 text-white font-bold rounded-md hover:bg-blue-700 disabled:bg-gray-400">Save to Estimate</button></div></div></main><script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
        import { getFirestore, collection, getDocs, doc, getDoc, setDoc, updateDoc, arrayUnion } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
        import { getStorage, ref, uploadString, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-storage.js";

        // Firebase Configuration
        const firebaseConfig = {
          apiKey: "AIzaSyADrnYgh1fSTo3IZD7HOEJMyjduzDYIYSs",
          authDomain: "city-pave-estimator.firebaseapp.com",
          projectId: "city-pave-estimator",
          storageBucket: "city-pave-estimator.firebasestorage.app",
          messagingSenderId: "111714884839",
          appId: "1:111714884839:web:2b782a1b7be5be8edc5642"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // Make Firebase services globally available for measure.js
        window.firebaseServices = { db, storage, collection, getDocs, doc, getDoc, setDoc, updateDoc, arrayUnion, ref, uploadString, getDownloadURL };
        signInAnonymously(auth).catch(error => console.error("Anonymous sign-in failed:", error));
    </script><script src="measure.js" type="module"></script><script type="module" src="../../qa-agent.js"></script></body></html>