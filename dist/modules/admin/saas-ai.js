// Â© 2025 City Pave. All Rights Reserved. Unauthorized copying is prohibited.
import { ModuleHierarchy } from './saas-modules.js'; export const GuardianAI = { checkDowngradeConflict: (tenantId, currentTier, newTier, tenantUsageStats) => { if (currentTier === 'titan' && newTier !== 'titan') { if (tenantUsageStats.storageUsed > 100) { return { allowed: false, warning: `WAIT! This client has ${tenantUsageStats.storageUsed}GB of Dash Cam footage stored. Downgrading will make this data inaccessible. Do you want to archive it first?` }; } } return { allowed: true, warning: null }; }, analyzeUpsellOpportunity: (usageStats) => { if (usageStats.schedulerOpens > 40 && !usageStats.hasProScheduler) { return "Client is using the 'Basic Scheduler' frequently. High-probability target for 'Pro Scheduler' upsell."; } return null; } }; export const ConflictAI = { checkPermissionLogic: (permissions) => { if (permissions['inventory_auto'] && !permissions['mechanic_triage']) { return "Logic Error: You are asking this user to manage parts, but they cannot see the Repair Tickets that require parts. Enable 'Mechanic Triage Board' as well?"; } if (permissions['geofencing'] && !permissions['time_clock']) { return "Logic Error: Geofencing enforces Time Clock rules. Please enable 'Time Clock' for this user."; } return null; } };